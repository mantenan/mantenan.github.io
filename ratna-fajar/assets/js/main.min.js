/*
 * Maumantenan
 * https://maumantenan.com
 * Digital Wedding Invitation
 * Copyright (c) 2020-2021
 */
for(var preload=["assets/img/main-1.jpg","assets/img/main-2.jpg","assets/img/bridegroom-1.jpg","assets/img/bridegroom-2.jpg","assets/img/slide-1.jpg","assets/img/slide-2.jpg","assets/img/slide-3.jpg","assets/img/slide-4.jpg","assets/img/slide-5.jpg","assets/img/qr-code.svg","https://maumantenan.com/tema/dalem/assets/img/pattern.svg","https://maumantenan.com/tema/dalem/assets/img/decoration.svg"],promises=[],i=0;i<preload.length;i++)!function(e,t){var o=new Image;o.onload=function(){t.resolve()},o.src=e}(preload[i],promises[i]=$.Deferred());var url=window.location.href;if(guest=url.split("?"),$.when.apply($,promises).done(function(){$(".preload").fadeOut(),"Admin"==guest[1]||"admin"==guest[1]?$("#admin").modal("show"):new Date>=new Date(2021,11,13,0,0,0)?setTimeout(function(){$("#open").modal("show")},250):$("#welcome").length>0?setTimeout(function(){$("#welcome").modal("show")},250):setTimeout(function(){$("#open").modal("show")},250)}),$("#admin").each(function(){let e=$(this);form=e.find("form"),alert=e.find(".alert"),userData=form.find('[for="username"]'),passData=form.find('[for="password"]'),userInput=form.find('[name="username"]'),passInput=form.find('[name="password"]'),form.submit(function(e){e.preventDefault(),userData.html()==userInput.val()&&passData.html()==passInput.val()?($("#admin").modal("hide"),$("#open").modal("show"),$("#open").on("shown.bs.modal",function(){$("body").addClass("modal-open")})):alert.show()})}),url.indexOf("?")>-1&&url.indexOf("@")>-1){var content=guest[1].split("@");name=content[0].split("+").join(" ").replace("%27","'").replace("%26","&"),address=content[1].split("+").join(" ").replace("%27","'").replace("%26","&"),$(".guest-name").html(name),$(".guest-address").html(address),$("#open").addClass("has-guest"),$("#beriUcapan-1").val(name),$("#beriUcapan-1").closest(".form-group").hide()}else if(url.indexOf("?")>-1){var name=guest[1].split("+").join(" ").replace("%27","'").replace("%26","&");$(".guest-name").html(name),$("#open").addClass("has-guest"),$("#beriUcapan-1").val(name),$("#beriUcapan-1").closest(".form-group").hide()}else $(".guest").addClass("d-none");$("#open").on("shown.bs.modal",function(e){setTimeout(function(){$("body").removeClass("overflow-hidden")},250)});var audio=document.createElement("audio");function finishCountdown(){$("#welcome").modal("hide"),$("#open").modal("show"),$("#open").on("shown.bs.modal",function(){$("body").addClass("modal-open")})}function copyToClipboard(e){var t=$("<textarea>");brRegex=/<br\s*[\/]?>/gi,$("body").append(t),t.val($(e).html().replace("<b>","").replace("</b>","").replace(brRegex,"\r\n")).select(),document.execCommand("copy"),t.remove(),$(e).closest("div").find(".btn-primary").toggleClass("btn-primary btn-success"),$(e).closest("div").find(".btn-caption").toggleClass("d-flex d-none"),setTimeout(function(){$(e).closest("div").find(".btn-success").toggleClass("btn-primary btn-success"),$(e).closest("div").find(".btn-caption").toggleClass("d-flex d-none")},3e3)}function timeline(){if(null!==document.querySelector("#tls")){let e=document.querySelector("#tls");e.remove(e)}let e=$(".timeline-item:last-child").height();heightMobileTop=35,heightMobileBottom=e-heightMobileTop+5,heightDesktopTop=60,heightDesktopBottom=e-heightDesktopTop+5,style=document.createElement("style"),style.id="tls",style.innerHTML=".timeline-item:first-child:after {height:"+heightMobileTop+"px} .timeline-item:last-child:after {height:"+heightMobileBottom+"px} @media (min-width: 768px) { .timeline-item:first-child:after {height:"+heightDesktopTop+"px} .timeline-item:last-child:after {height:"+heightDesktopBottom+"px} }",document.querySelector("head").appendChild(style)}audio.src="https://maumantenan.com/tema/dalem/assets/audio/audio.mp3",audio.volume=1,audio.autoPlay=!1,audio.preLoad=!0,audio.controls=!0,audio.loop=!0,$(".play-audio").click(function(){audio.play()}),AOS.init({once:!0}),$(".countdown").countdown($.extend({until:new Date(2022,1,12,11,0,0),format:"ODHMS",timezone:7},$.countdown.regionalOptions.id)),$(".countdown-publish").countdown($.extend({until:new Date(2021,11,13,0,0,0),format:"ODHMS",timezone:7,onExpiry:finishCountdown},$.countdown.regionalOptions.id)),timeline(),$(window).resize(timeline),window.onbeforeunload=function(){$("body").remove(),$(window).scrollTop(0)},$(document).on("contextmenu",function(){return!1}),$(function(){$(document).keydown(function(e){if((e.ctrlKey||e.metaKey)&&(65==e.keyCode||83==e.keyCode))return!1})});if($("#ucapan").length>0){const t=["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"];function arrayToCard(t){$(t).each(function(t,a){let e=a[0];splitTanggal=e.split("/"),e=Number(splitTanggal[0])+" "+["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"][Number(splitTanggal[1])-1]+" "+splitTanggal[2],nama=a[1],ucapan=a[2],$('<div class="card mx-3 border-0 bg-overlay shadow d-none">\n\t\t\t\t\t<div class="card-body">\n\t\t\t\t\t\t<p class="mb-0">'+ucapan+'</p>\n\t\t\t\t\t\t<div class="font-weight-bold color-theme text-uppercase mt-2 mt-md-1">'+nama+'</div>\n\t\t\t\t\t\t<small class="opacity-5">'+e+"</small>\n\t\t\t\t\t</div>\n\t\t\t\t</div>").prependTo("#dataUcapan")})}function slideUcapan(){const t=document.querySelector("#ucapan .overflow-auto");let a,e,n=!1;t.addEventListener("mousedown",s=>{n=!0,t.classList.add("active"),a=s.pageX-t.offsetLeft,e=t.scrollLeft}),t.addEventListener("mouseleave",()=>{n=!1,t.classList.remove("active")}),t.addEventListener("mouseup",()=>{n=!1,t.classList.remove("active")}),t.addEventListener("mousemove",s=>{if(!n)return;s.preventDefault();const o=3*(s.pageX-t.offsetLeft-a);t.scrollLeft=e-o})}$.ajax({type:"GET",url:atob("aHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvMUhMcGIxTlk5Tl9FRmVlSmdLaERibE05ZUxFaVdXVmlSUjBpU3dpcEh6aGsvZ3Zpei90cT90cXg9b3V0OmNzdiZzaGVldD1VY2FwYW4="),success:function(t){let a=$.csv.toArrays(t);$("#dataUcapan").append(arrayToCard(a)),setTimeout(function(){$("#dataUcapan").each(function(){let t=$(this);t.find(".card:nth-child(1)").removeClass("d-none"),t.find(".card:nth-child(2)").removeClass("d-none"),t.find(".card:nth-child(3)").removeClass("d-none"),t.find(".card:nth-child(4)").removeClass("d-none"),t.find(".card:nth-child(5)").removeClass("d-none"),t.find(".card:last-child").remove(),t.find(".card").length>5&&t.next().removeClass("d-none"),t.next().on("click",function(){let a=$(this);hidden=t.find(".d-none"),numb=5,slice=Array.from(hidden).slice(0,numb),slice.forEach(t=>{t.classList.remove("d-none")}),hidden.length<=numb&&a.addClass("d-none")})})},1e3)},error:function(){console.log("Maaf, silakan muat ulang halaman.")}}),slideUcapan();var urlUcapan=atob("aHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J4czRIVEIwcjIyLXViNDhCTUpDLXJzNGw5YURhM3piSnFDbHRQVkdKR2dVaXB3SUxFUUM0aVVfYzhIdk1jZXRnZlYvZXhlYw==");formUcapan=document.forms.beriUcapan,formUcapan.addEventListener("submit",a=>{a.preventDefault(),$(".form-gsheet .loading").addClass("show"),fetch(urlUcapan,{method:"post",body:new FormData(formUcapan)}).then(a=>{console.log("Success!",a);let e=formUcapan.querySelector("input").value;message=formUcapan.querySelector("textarea").value,today=new Date,stamp=today.getDate()+" "+t[today.getMonth()]+" "+today.getFullYear()+" - Baru Saja",$('<div class="card mx-3 border-0 bg-overlay shadow">\n\t\t\t\t\t<div class="card-body">\n\t\t\t\t\t\t<p class="mb-0">'+message+'</p>\n\t\t\t\t\t\t<div class="font-weight-bold color-theme text-uppercase mt-2 mt-md-1">'+e+'</div>\n\t\t\t\t\t\t<small class="opacity-5">'+stamp+"</small>\n\t\t\t\t\t</div>\n\t\t\t\t</div>").prependTo("#dataUcapan"),$(".form-gsheet .loading").removeClass("show"),formUcapan.querySelector("textarea").value=""}).catch(t=>{$(".form-gsheet .loading").removeClass("show"),console.error("Error!",t.message)})})}
