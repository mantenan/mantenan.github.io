/*
 * Dark Mode
 * Design by degiam [https://degiam.github.io]
 * Copyright 2021 Jejualan
 */

let body = document.querySelector('body')
	iconDark = document.querySelector('#darkMode')
	iconLight = document.querySelector('#lightMode')
	on = 'transition-on'
	off = 'transition-off'

function switchNavbar() {
	let navbar = document.querySelectorAll('.navbar')
	for (let i = 0; i < navbar.length; i++) {
		navbar[i].classList.toggle('navbar-light')
		navbar[i].classList.toggle('navbar-dark')
	}
}
function switchDark() {
	document.body.classList.add('dark')
	iconDark.classList.add('selected')
	switchNavbar()
}
function switchLight() {
	document.body.classList.remove('dark')
	iconLight.classList.add('selected')
}
function darkMode() {
	if ( localStorage.getItem('dark') === null ) {
		body.classList.remove(off)
		body.classList.add(on)

		switchNavbar()

		setTimeout(function() {
			body.classList.add('dark')
			body.classList.remove(on)
		}, 75)

		localStorage.setItem('dark','on')
	} else {
		body.classList.remove(on)
		body.classList.add(off)

		switchNavbar()

		setTimeout(function() {
			body.classList.remove('dark')
		}, 75)
		setTimeout(function() {
			body.classList.remove(off)
		}, 200)

		localStorage.removeItem('dark')
	}
}

iconDark.onclick = function() {
	iconDark.classList.remove('selected')
	iconLight.classList.add('selected')
	darkMode()
}
iconLight.onclick = function() {
	iconDark.classList.add('selected')
	iconLight.classList.remove('selected')
	darkMode()
}

if ( window.matchMedia('(prefers-color-scheme: dark)').matches || localStorage.getItem('dark') !== null ) {
	switchDark()
} else {
	switchLight()
}
