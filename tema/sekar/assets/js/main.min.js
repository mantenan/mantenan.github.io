/*
 * Maumantenan
 * https://maumantenan.com
 * Digital Wedding Invitation
 * Copyright (c) 2020-2021
 */
const days=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],months=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];var current=new Date;current.setDate(current.getDate()+40),day=days[current.getDay()],date=current.getDate(),month=months[current.getMonth()],year=current.getFullYear(),today=day+", "+date+" "+month+" "+year,$(".dummy-date").html(today);var dd=String(current.getDate()).padStart(2,"0");mm=String(current.getMonth()+1).padStart(2,"0"),yyyy=current.getFullYear(),todays=dd+"/"+mm+"/"+yyyy;var cdd=new Date;cddDD=cdd.getDate(),cddMM=cdd.getMonth()+1,cddYY=cdd.getFullYear(),cddS=Math.floor(cdd.getTime()/1e3%60),cddM=Math.floor(cdd.getTime()/6e4%60),cddH=Math.floor(cdd.getTime()/36e5%24)+7;for(var preload=["assets/img/main-1.jpg","assets/img/main-2.jpg","assets/img/main-3.jpg","assets/img/bridegroom-1.jpg","assets/img/bridegroom-2.jpg","assets/img/slide-1.jpg","assets/img/slide-2.jpg","assets/img/slide-3.jpg","assets/img/slide-4.jpg","assets/img/qr-code.svg","assets/img/pattern.svg"],promises=[],i=0;i<preload.length;i++)!function(e,t){var a=new Image;a.onload=function(){t.resolve()},a.src=e}(preload[i],promises[i]=$.Deferred());var url=window.location.href;if(guest=url.split("?"),$.when.apply($,promises).done(function(){$(".preload").fadeOut(),"Admin"==guest[1]||"admin"==guest[1]?$("#admin").modal("show"):new Date>=new Date(cddYY,cddMM-1,cddDD,cddH,cddM+1,cddS)?setTimeout(function(){$("#open").modal("show")},250):$("#welcome").length>0?setTimeout(function(){$("#welcome").modal("show")},250):setTimeout(function(){$("#open").modal("show")},250)}),$("#admin").each(function(){let e=$(this);form=e.find("form"),alert=e.find(".alert"),userData=form.find('[for="username"]'),passData=form.find('[for="password"]'),userInput=form.find('[name="username"]'),passInput=form.find('[name="password"]'),form.submit(function(e){e.preventDefault(),userData.html()==userInput.val()&&passData.html()==passInput.val()?($("#admin").modal("hide"),$("#open").modal("show"),$("#open").on("shown.bs.modal",function(){$("body").addClass("modal-open")})):alert.show()})}),url.indexOf("?")>-1&&url.indexOf("&")>-1){var content=guest[1].split("&");name=content[0].split("+").join(" ").replace("%27","'"),address=content[1].split("+").join(" ").replace("%27","'"),$(".guest-name").html(name),$(".guest-address").html(address),$("#open").addClass("has-guest"),$("#beriUcapan-1").val(name),$("#beriUcapan-1").closest(".form-group").hide()}else if(url.indexOf("?")>-1){var name=guest[1].split("+").join(" ").replace("%27","'");$(".guest-name").html(name),$("#open").addClass("has-guest"),$("#beriUcapan-1").val(name),$("#beriUcapan-1").closest(".form-group").hide()}else $(".guest").addClass("d-none");$("#open").on("shown.bs.modal",function(e){setTimeout(function(){$("body").removeClass("overflow-hidden")},250)});var audio=document.createElement("audio");function music(){$(".nav-link.play-audio").toggleClass("d-none"),$(".nav-link.pause-audio").toggleClass("d-none")}function finishCountdown(){$("#welcome").modal("hide"),$("#open").modal("show"),$("#open").on("shown.bs.modal",function(){$("body").addClass("modal-open")})}function copyToClipboard(e){var t=$("<textarea>");brRegex=/<br\s*[\/]?>/gi,$("body").append(t),t.val($(e).html().replace("<b>","").replace("</b>","").replace(brRegex,"\r\n")).select(),document.execCommand("copy"),t.remove(),$(e).closest("div").find(".btn-primary").toggleClass("btn-primary btn-success"),$(e).closest("div").find(".btn-caption").toggleClass("d-flex d-none"),setTimeout(function(){$(e).closest("div").find(".btn-success").toggleClass("btn-primary btn-success"),$(e).closest("div").find(".btn-caption").toggleClass("d-flex d-none")},3e3)}function timeline(){if(null!==document.querySelector("#tls")){let e=document.querySelector("#tls");e.remove(e)}let e=$(".timeline-item:last-child").height();heightMobileTop=35,heightMobileBottom=e-heightMobileTop+5,heightDesktopTop=60,heightDesktopBottom=e-heightDesktopTop+5,style=document.createElement("style"),style.id="tls",style.innerHTML=".timeline-item:first-child:after {height:"+heightMobileTop+"px} .timeline-item:last-child:after {height:"+heightMobileBottom+"px} @media (min-width: 768px) { .timeline-item:first-child:after {height:"+heightDesktopTop+"px} .timeline-item:last-child:after {height:"+heightDesktopBottom+"px} }",document.querySelector("head").appendChild(style)}if(audio.src="assets/audio/audio.mp3",audio.volume=1,audio.autoPlay=!1,audio.preLoad=!0,audio.controls=!0,audio.loop=!0,$(".play-audio").click(function(){audio.play(),music()}),$(".pause-audio").click(function(){audio.pause(),music()}),AOS.init({once:!0}),$(".countdown").countdown($.extend({until:new Date(yyyy,mm-1,dd,13,0,0),format:"ODHMS",timezone:7},$.countdown.regionalOptions.id)),$(".countdown-publish").countdown($.extend({until:new Date(cddYY,cddMM-1,cddDD,cddH,cddM+1,cddS),format:"ODHMS",timezone:7,onExpiry:finishCountdown},$.countdown.regionalOptions.id)),timeline(),$(window).resize(timeline),$("#ucapan").length>0){const e=["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"],t="https://spreadsheets.google.com/feeds/list/",a="1FOiCKpx-hE8qfIcNdGbuUBQykPFlBO8JfvtXNdraMGI",n="/public/values?alt=json";function showUcapan(){$("#reloadUcapan").remove(),$('<div class="bg-theme-1 text-white p-2 rounded-circle cursor-pointer" id="loadingUcapan">\n\t\t\t\t<div class="spinner-border" role="status" style="width:20px;height:20px;font-size:10px;margin:2px;">\n\t\t\t\t\t<span class="sr-only">Loading...</span>\n\t\t\t\t</div>\n\t\t\t</div>').prependTo("#dataUcapan");source=t+a+"/1"+n,$.getJSON(source,function(){console.log("Success!")}).done(function(t){t.feed.entry.length>0?($.each(t.feed.entry,function(t,a){let n=a.gsx$tanggal.$t;splitTanggal=n.split("/"),n=Number(splitTanggal[0])+" "+e[Number(splitTanggal[1])-1]+" "+splitTanggal[2],$nama=a.gsx$nama.$t,$ucapan=a.gsx$ucapan.$t,$('<div class="card mx-3 border-0 shadow rounded d-none">\n\t\t\t\t\t\t\t<div class="card-body">\n\t\t\t\t\t\t\t\t<p class="mb-0">'+$ucapan+'</p>\n\t\t\t\t\t\t\t\t<div class="font-weight-bold color-theme text-uppercase mt-2 mt-md-1">'+$nama+'</div>\n\t\t\t\t\t\t\t\t<small class="opacity-5">'+n+"</small>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>").prependTo("#dataUcapan")}),$("#loadingUcapan").remove(),$("#reloadUcapan").remove(),$("#dataUcapan").next().removeClass("d-none"),$("#dataUcapan .card:nth-child(1)").removeClass("d-none"),$("#dataUcapan .card:nth-child(2)").removeClass("d-none"),$("#dataUcapan .card:nth-child(3)").removeClass("d-none")):console.log("Null!")}).fail(function(){console.error("Error!"),$("#loadingUcapan").remove(),$('<div class="bg-theme-1 text-white p-2 rounded-circle cursor-pointer" onclick="showUcapan()" id="reloadUcapan">\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">\n\t\t\t\t\t\t<path d="M2 12C2 16.97 6.03 21 11 21C13.39 21 15.68 20.06 17.4 18.4L15.9 16.9C14.63 18.25 12.86 19 11 19C4.76 19 1.64 11.46 6.05 7.05C10.46 2.64 18 5.77 18 12H15L19 16H19.1L23 12H20C20 7.03 15.97 3 11 3C6.03 3 2 7.03 2 12Z"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>').prependTo("#dataUcapan")}),$("#dataUcapan").each(function(){let e=$(this);e.next().on("click",function(){let t=$(this);hidden=e.find(".d-none"),numb=3,slice=Array.from(hidden).slice(0,numb),slice.forEach(e=>{e.classList.remove("d-none")}),hidden.length<=numb&&t.addClass("d-none")})})}function slideUcapan(){const e=document.querySelector("#ucapan .overflow-auto");let t,a,n=!1;e.addEventListener("mousedown",o=>{n=!0,e.classList.add("active"),t=o.pageX-e.offsetLeft,a=e.scrollLeft}),e.addEventListener("mouseleave",()=>{n=!1,e.classList.remove("active")}),e.addEventListener("mouseup",()=>{n=!1,e.classList.remove("active")}),e.addEventListener("mousemove",o=>{if(!n)return;o.preventDefault();const s=3*(o.pageX-e.offsetLeft-t);e.scrollLeft=a-s})}showUcapan(),slideUcapan();var gsUcapan="AKfycbxyOWjPIab8UPOl5dCwDiPISVbQ_aRuNmk7-t6PtgXqUBLEKMKEvzQdb6z0lQJOv7Y";gsKehadiran="AKfycbwv1xc5dfgQhQss78RcP8NmKLIOS9jehLb2NO4T4xpbhXYTxWfFN8cKDctbwWGCcWwZ",gsBingkisan="AKfycbzO3ZxVkhP04RbsdFW-NVXEBL3CiE_gRfo207IR66GX262OCYawEtRFU4TMT-Yc-R2O";var urlUcapan="https://script.google.com/macros/s/"+gsUcapan+"/exec";formUcapan=document.forms.beriUcapan,formUcapan.addEventListener("submit",t=>{t.preventDefault(),$(".form-gsheet .loading").addClass("show"),fetch(urlUcapan,{method:"post",body:new FormData(formUcapan)}).then(t=>{console.log("Success!",t);let a=formUcapan.querySelector("input").value;message=formUcapan.querySelector("textarea").value,today=new Date,stamp=today.getDate()+" "+e[today.getMonth()]+" "+today.getFullYear()+" - Baru Saja",$('<div class="card mx-3 border-0 shadow rounded">\n\t\t\t\t\t<div class="card-body">\n\t\t\t\t\t\t<p class="mb-0">'+message+'</p>\n\t\t\t\t\t\t<div class="font-weight-bold color-theme text-uppercase mt-2 mt-md-1">'+a+'</div>\n\t\t\t\t\t\t<small class="opacity-5">'+stamp+"</small>\n\t\t\t\t\t</div>\n\t\t\t\t</div>").prependTo("#dataUcapan"),$('[data-target=".form-gsheet"]').click(),$(".form-gsheet .loading").removeClass("show"),formUcapan.reset()}).catch(e=>{$(".form-gsheet .loading").removeClass("show"),console.error("Error!",e.message)})}),formUcapan.querySelector("#kirimWA").addEventListener("click",e=>{let t=formUcapan.querySelector("input").value;message=formUcapan.querySelector("textarea").value,t.length<1||message.length<1?formUcapan.querySelector('[type="submit"]').click():$("#kirimUcapan").modal("show"),$("#kirimUcapan [data-phone]").click(function(){let e=$(this).data("phone");url="https://wa.me/"+e+"?text="+encodeURIComponent(message)+"%0A%0A-%20"+t,window.open(url,"_blank")})})}function iframeResponsive(){$("iframe").each(function(){let e=$(this);parent=e.parent(),ratio=(e.width()/e.height()).toFixed(2),e.attr("width")>parent.width()?(e.css("width",parent.width()+"px"),e.css("height",(parent.width()/ratio).toFixed(0)+"px")):e.removeAttr("style")})}$("#media").each(function(){function e(){$(".carousel-item-container>*").css("max-height",$(window).height()-100)}$(this).on("show.bs.modal",function(){$(".modal-caption").html($(this).find(".active").data("slide-caption")),$(".youtube").each(function(){var e=$(this);source=e.find("iframe").attr("src"),active=e.closest(".carousel-inner>.active").find("iframe"),e.attr("data-src",source),e.find("iframe").attr("src",""),active.length&&active.attr("src",e.data("src"))})}),$(this).on("shown.bs.modal",function(){$(".carousel").carousel("pause")}),$(this).on("slid.bs.carousel",function(){$(".modal-caption").html($(this).find(".active").data("slide-caption")).fadeIn("fast"),$(".youtube").each(function(){var e=$(this);source=e.find("iframe").attr("src"),active=e.closest(".carousel-inner>.active").find("iframe"),e.find("iframe").attr("src",""),active.length&&active.attr("src",e.data("src"))})}),$(this).on("slide.bs.carousel",function(){$(".modal-caption").fadeOut("fast"),$("video").each(function(){const e=$(this).closest(".carousel-inner>.active").find("video");e.length&&e.get(0).pause()})}),$(this).on("hidden.bs.modal",function(){$(".carousel").carousel("cycle"),$("video").each(function(){const e=$(this).closest(".carousel-inner>.active").find("video");e.length&&e.get(0).pause()})}),$(".modal-caption").hover(function(){$(this).toggleClass("text-truncate h-auto position-absolute top")}),e(),$(window).resize(e)}),$(document).click(function(e){$(e.target).is(".carousel-indicators,.carousel-indicators *,.carousel-top,.carousel-top *,.carousel-item-container *")||1==$(".modal.with-carousel").hasClass("show")&&$(".modal.with-carousel").modal("hide")}),$("iframe").each(function(){let e=$(this).closest(".tab-pane").attr("id");$('[data-toggle="tab"][href="#'+e+'"]').click(function(){setTimeout(function(){iframeResponsive()},200)})}),$(window).resize(iframeResponsive),$('[data-toggle="tab"]').click(function(){$("[data-aos]").removeClass("aos-animate"),setTimeout(function(){$(window).scrollTop(0),$("[data-aos]").addClass("aos-animate"),timeline()},200)}),window.onbeforeunload=function(){$("body").remove(),$(window).scrollTop(0)},$("html").on("contextmenu",function(){return!1}),$(function(){$(document).keydown(function(e){if((e.ctrlKey||e.metaKey)&&(65==e.keyCode||83==e.keyCode))return!1})});