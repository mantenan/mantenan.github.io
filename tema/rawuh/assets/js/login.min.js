/*
 * Maumantenan
 * https://maumantenan.com
 * Digital Wedding Invitation
 * Copyright (c) 2020-2021
 */
const urlAdmin="/tema/rawuh/admin";var gsStart="https://script.google.com/macros/s/";gsEnd="/exec",shUrl="https://docs.google.com/spreadsheets/d/1eLzBeZf-s2gOu0GEboeSbdwuqCmM4IVl_JzFCK87Bjk/gviz/tq?tqx=out:csv&sheet=";var loadingSubmit='<div class="btn btn-success btn-block py-2 px-3 mt-4 d-flex align-items-center justify-content-center loading-submit"><div class="spinner-border spinner-border-sm text-white" role="status"><span class="sr-only">Loading...</span></div><span class="ml-2">Mohon tunggu...</span></div>';function generateCookie(e){let t="";string="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",stringLength=string.length;for(var a=0;a<e;a++)t+=string.charAt(Math.floor(Math.random()*stringLength));return t}function dbLogin(){let e=shUrl+"Login";$.ajax({type:"get",url:e,success:function(e){!function(e){$(e).each(function(e,t){let a=document.forms.formLogin;userLabel=a.querySelector('[for="username"]'),passLabel=a.querySelector('[for="password"]'),userLabel.setAttribute("data-1",t[1]),passLabel.setAttribute("data-1",t[2]),userLabel.setAttribute("data-2",t[3]),passLabel.setAttribute("data-2",t[4])})}($.csv.toArrays(e))},error:function(){console.log("Maaf, silakan muat ulang halaman.")}})}function formLogin(){let e=document.forms.formLogin;function t(){localStorage.setItem("login cookie",generateCookie(10)),window.location.href=urlAdmin}function a(){formSubmitLogin.classList.remove("d-none"),$("section form .loading-submit").remove(),alert.show()}function s(){userLabel.removeAttribute("data-1"),passLabel.removeAttribute("data-1"),userLabel.removeAttribute("data-2"),passLabel.removeAttribute("data-2")}userLabel=e.querySelector('[for="username"]'),passLabel=e.querySelector('[for="password"]'),userInput=e.querySelector("#username"),passInput=e.querySelector("#password"),formSubmitLogin=e.querySelector('[type="submit"]'),alert=$("section .alert"),alertUser=alert.find(".username-false"),alertPass=alert.find(".password-false"),alertBoth=alert.find(".both-false"),e.addEventListener("submit",r=>{r.preventDefault(),dbLogin(),alert.hide(),formSubmitLogin.classList.add("d-none"),$(loadingSubmit).appendTo(e);let o=setInterval(()=>{(userLabel.getAttribute("data-1")&&passLabel.getAttribute("data-1")||userLabel.getAttribute("data-2")&&passLabel.getAttribute("data-2"))&&(userLabel.getAttribute("data-1")==userInput.value&&passLabel.getAttribute("data-1")==passInput.value?(s(),localStorage.setItem("login account","1"),t()):userLabel.getAttribute("data-2")==userInput.value&&passLabel.getAttribute("data-2")==passInput.value?(s(),localStorage.setItem("login account","2"),t()):userLabel.getAttribute("data-1")!=userInput.value&&passLabel.getAttribute("data-1")==passInput.value?(s(),alertUser.removeClass("d-none"),alertPass.addClass("d-none"),alertBoth.addClass("d-none"),setTimeout(()=>{a()},100)):userLabel.getAttribute("data-2")!=userInput.value&&passLabel.getAttribute("data-2")==passInput.value?(s(),alertUser.removeClass("d-none"),alertPass.addClass("d-none"),alertBoth.addClass("d-none"),setTimeout(()=>{a()},100)):userLabel.getAttribute("data-1")==userInput.value&&passLabel.getAttribute("data-1")!=passInput.value?(s(),alertUser.addClass("d-none"),alertPass.removeClass("d-none"),alertBoth.addClass("d-none"),setTimeout(()=>{a()},100)):userLabel.getAttribute("data-2")==userInput.value&&passLabel.getAttribute("data-2")!=passInput.value?(s(),alertUser.addClass("d-none"),alertPass.removeClass("d-none"),alertBoth.addClass("d-none"),setTimeout(()=>{a()},100)):(s(),alertUser.addClass("d-none"),alertPass.addClass("d-none"),alertBoth.removeClass("d-none"),setTimeout(()=>{a()},100)),clearInterval(o))},100)})}function togglePassword(){let e=".toggle-password";$(e+"-trigger").click(function(){$(e).each(function(){$(this).find(e+"-trigger").toggleClass("hide show");let t=$(this).find("input");"password"===t.attr("type")?t.attr("type","text"):t.attr("type","password")})})}localStorage.getItem("login cookie")&&localStorage.getItem("login account")&&(window.location.href=urlAdmin),setTimeout(()=>{$("body").removeAttr("style")},500),setTimeout(()=>{$("section").fadeIn()},1e3),formLogin(),togglePassword();