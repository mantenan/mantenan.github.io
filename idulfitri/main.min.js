/*
 * Maumantenan
 * https://maumantenan.com
 * Digital Wedding Invitation
 * Copyright (c) 2020-2022
 */
const shUrl=atob("aHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvMUhJVkpmMUdNOEJYUDFFM1E4c3l6emREZFB4RXl3OWtyWjlZb0djQjRvajAvZ3Zpei90cT90cXg9b3V0OmNzdiZzaGVldD0="),urlUcapan=atob("aHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J6QUp5emRuSXljVHBWNDczRV96cUk2R180ZUlYOTZTamU4eWxNcGdSX1lRY2o2LXBIX1dqTE1HQXlTNG9tSHRBTWIvZXhlYw==");function generateString(t){let a="";abc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",abcLength=abc.length;for(var e=0;e<t;e++)a+=abc.charAt(Math.floor(Math.random()*abcLength));return a}function findID(t){document.querySelectorAll("[data-id]").forEach(a=>{t!==a.getAttribute("data-id")&&a.parentNode.removeChild(a)})}function arrayToCongrats(t){$(t).each(function(t,a){a[0];id=a[1],nama=a[2],judul=a[3],ucapan=a[4],tema=a[5],"Tema"!==tema&&$('<div data-id="'+id+'" data-theme="'+tema+'">\n\t\t\t\t\t<link rel="stylesheet" href="tema'+tema+'/main.css">\n\t\t\t\t\t<div class="container">\n\t\t\t\t\t\t<div class="obj-top">\n\t\t\t\t\t\t\t<img class="obj-1" src="tema'+tema+'/object-1.png">\n\t\t\t\t\t\t\t<img class="obj-2" src="tema'+tema+'/object-1.png">\n\t\t\t\t\t\t\t<img class="obj-3" src="tema'+tema+'/object-2.png">\n\t\t\t\t\t\t\t<img class="obj-4" src="tema'+tema+'/object-2.png">\n\t\t\t\t\t\t\t<img class="obj-5" src="tema'+tema+'/object-3.png">\n\t\t\t\t\t\t\t<img class="obj-6" src="tema'+tema+'/object-3.png">\n\t\t\t\t\t\t\t<img class="obj-7" src="tema'+tema+'/object-4.png">\n\t\t\t\t\t\t\t<img class="obj-8" src="tema'+tema+'/object-4.png">\n\t\t\t\t\t\t\t<img class="obj-9" src="tema'+tema+'/object-4.png">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="obj-mid">\n\t\t\t\t\t\t\t<div class="content p-3">\n\t\t\t\t\t\t\t\t<div class="title mb-4">'+judul+'</div>\n\t\t\t\t\t\t\t\t<textarea class="form-control border-0 bg-transparent" spellcheck="false" disabled>'+ucapan+'</textarea>\n\t\t\t\t\t\t\t\t<div class="author mt-4">~ '+nama+'</div>\n\t\t\t\t\t\t\t\t<img class="brand mt-5" width="50" height="50" src="../assets/img/maumantenan-1.svg">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="obj-btm">\n\t\t\t\t\t\t\t<img class="obj-1" src="tema'+tema+'/object-5.png">\n\t\t\t\t\t\t\t<img class="obj-2" src="tema'+tema+'/object-6.png">\n\t\t\t\t\t\t\t<img class="obj-3" src="tema'+tema+'/object-6.png">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>').prependTo("#dataUcapan")})}function textareaHeight(t){document.querySelectorAll(t).forEach(t=>{t.style.height="auto",t.style.height=t.scrollHeight+"px"})}function congratsForm(t){$(t+" #beriUcapan-3").on("input",function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"}),$(window).resize(()=>textareaHeight(t+" #beriUcapan-3"))}$("#beriUcapan-2").val("Selamat Hari Raya Idul Fitri 1443 H"),$("#beriUcapan-3").val("Minal Aidin Wal Faizin\nMohon maaf lahir dan batin\nðŸ™ðŸ»"),$(window).resize(()=>textareaHeight("#dataUcapan textarea")),$.ajax({type:"GET",url:shUrl+"Ucapan",success:function(t){let a=window.location.href;if(a.indexOf("?")>-1){let e=$.csv.toArrays(t);$("#dataUcapan").append(arrayToCongrats(e)),findID(a.split("?")[1]),setTimeout(()=>{textareaHeight("#dataUcapan textarea")},500)}},error:function(){console.log("Maaf, silakan muat ulang halaman.")}}),congratsForm('[name="beriUcapan"]');const formUcapan=document.forms.beriUcapan;function insertID(t,a){$(t).on("keyup",function(){$(a).val(generateString(3)+btoa($(this).val()))})}function themeSwitch(t,a){$(t).on("change",function(){let t=$(this).val();$(a).attr("data-theme",t);let e=$(a).find("link").attr("href");split=e.split("/"),$(a).find("link").attr("href","tema"+t+"/"+split[1]),$(a).find("img").each(function(){let a=$(this).attr("src");split=a.split("/"),$(this).attr("src","tema"+t+"/"+split[1])})})}function copyToClipboard(){let t=$('<textarea class="position-fixed top left sr-only" id="copyToClipboard">');$("main").append(t),t.val(window.location.href+"?"+$("#beriUcapan-0").val()).select(),document.execCommand("copy"),t.remove(),$("#copied").fadeIn(),setTimeout(()=>{$("#copied").fadeOut()},5e3)}function shareToWA(){let t=window.location.href+"?"+$("#beriUcapan-0").val();wa="https://wa.me/?text="+t,window.open(wa,"_blank").focus()}function openLink(){let t=window.location.href+"?"+$("#beriUcapan-0").val();window.open(t,"_blank").focus()}formUcapan.addEventListener("submit",t=>{t.preventDefault(),$('[name="beriUcapan"] .loading').removeClass("d-none"),fetch(urlUcapan,{method:"post",body:new FormData(formUcapan)}).then(t=>{$('[name="beriUcapan"] .loading').addClass("d-none"),$('[name="beriUcapan"]').addClass("d-none"),$("#success").removeClass("d-none"),setTimeout(()=>{},3e3)}).catch(t=>{$('[name="beriUcapan"] .loading').addClass("d-none"),$('[name="beriUcapan"] .status .alert-danger').removeClass("d-none"),setTimeout(()=>{$('[name="beriUcapan"] .status .alert-danger').addClass("d-none")},3e3)})}),insertID("#beriUcapan-1","#beriUcapan-0"),themeSwitch("#beriUcapan-4","#form"),window.onbeforeunload=function(){$("body").remove(),$(window).scrollTop(0)},$(document).on("contextmenu",function(){return!1}),$(document).keydown(function(t){let a=t.target.tagName.toLowerCase();if("input"!=a&&"textarea"!=a&&(t.ctrlKey||t.metaKey)&&(65==t.keyCode||83==t.keyCode))return!1});