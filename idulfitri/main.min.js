/*!
 * Maumantenan
 * https://maumantenan.com
 * Digital Wedding Invitation
 * Copyright (c) 2020-2023
 */
const shUrl=atob("aHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvMUhJVkpmMUdNOEJYUDFFM1E4c3l6emREZFB4RXl3OWtyWjlZb0djQjRvajAvZ3Zpei90cT90cXg9b3V0OmNzdiZzaGVldD0="),urlUcapan=atob("aHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J3WXdkR21LVXIwWnBvVGxzcUJLdmswZ294XzUwQzJhcDNmQllCS2x0RW9VLTVIVlZMUEZaOEU1MXBDV0FIWkdxZngvZXhlYw==");function generateString(a){let e="";abcLength=(abc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").length;for(var t=0;t<a;t++)e+=abc.charAt(Math.floor(Math.random()*abcLength));return e}function emoji(){return/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g}function removeEmoji(a){return a.replace(emoji(),"")}function findID(a){document.querySelectorAll("[data-id]").forEach(e=>{a!==e.getAttribute("data-id")&&e.parentNode.removeChild(e)})}function arrayToCongrats(a){$(a).each(function(a,e){e[0],id=e[1],nama=e[2],judul=e[3],ucapan=e[4],"Tema"!==(tema=e[5])&&$('<div data-id="'+id+'" data-theme="'+tema+`"><link rel="stylesheet" href="tema`+tema+`/main.css"><div class="container"><div class="obj-top"><img class="obj-1" src="tema`+tema+`/object-1.png"><img class="obj-2" src="tema`+tema+`/object-1.png"><img class="obj-3" src="tema`+tema+`/object-2.png"><img class="obj-4" src="tema`+tema+`/object-2.png"><img class="obj-5" src="tema`+tema+`/object-3.png"><img class="obj-6" src="tema`+tema+`/object-3.png"><img class="obj-7" src="tema`+tema+`/object-4.png"><img class="obj-8" src="tema`+tema+`/object-4.png"><img class="obj-9" src="tema`+tema+`/object-4.png"></div><div class="obj-mid"><div class="content p-3"><div class="title mb-4">`+judul+`</div><textarea class="form-control border-0 bg-transparent" spellcheck="false" disabled>`+ucapan+`</textarea><div class="author mt-4">~ `+nama+`</div><a class="d-inline-block mt-5" href="/"><img class="brand" width="50" height="50" src="../assets/img/maumantenan-1.svg"></a></div></div><div class="obj-btm"><img class="obj-1" src="tema`+tema+`/object-5.png"><img class="obj-2" src="tema`+tema+`/object-6.png"><img class="obj-3" src="tema`+tema+`/object-6.png"></div></div></div>`).prependTo("#dataUcapan")})}function textareaHeight(a){document.querySelectorAll(a).forEach(a=>{a.style.height="auto",a.style.height=a.scrollHeight+"px"})}function congratsForm(a){$(a+" #beriUcapan-3").on("input",function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"}),$(window).resize(()=>textareaHeight(a+" #beriUcapan-3"))}function insertID(a,e){$(a).on("keyup",function(){$(e).val(generateString(3)+btoa($(this).val()))})}function themeSwitch(a,e){let t=$("#beriUcapan-2").closest(".form-group");3!=$(a).val()&&4!=$(a).val()?t.addClass("sr-only"):t.removeClass("sr-only"),$(a).on("change",function(){let a=$(this).val();$(e).attr("data-theme",a);split=$(e).find("link").attr("href").split("/"),$(e).find("link").attr("href","tema"+a+"/"+split[1]),$(e).find("img").each(function(){split=$(this).attr("src").split("/"),$(this).attr("src","tema"+a+"/"+split[1])}),3!=a&&4!=a?t.addClass("sr-only"):t.removeClass("sr-only")})}function copyToClipboard(){let a=$('<textarea class="position-fixed top left sr-only" id="copyToClipboard">');$("main").append(a),a.val(window.location.href+"?"+$("#beriUcapan-0").val()).select(),document.execCommand("copy"),a.remove(),$("#copied").fadeIn(),setTimeout(()=>{$("#copied").fadeOut()},5e3)}function shareToWA(){wa="https://wa.me/?text="+(window.location.href+"?")+$("#beriUcapan-0").val(),window.open(wa,"_blank").focus()}function openLink(){let a=window.location.href+"?"+$("#beriUcapan-0").val();window.open(a,"_blank").focus()}$("#beriUcapan-2").val("Selamat Hari Raya Idul Fitri 1444 H"),$("#beriUcapan-3").val("Minal Aidin Wal Faizin\nMohon maaf lahir dan batin\n\uD83D\uDE4F\uD83C\uDFFB"),$(window).resize(()=>textareaHeight("#dataUcapan textarea")),$.ajax({type:"GET",url:shUrl+"Ucapan",success:function(a){let e=window.location.href;if(e.indexOf("?")>-1){let t=$.csv.toArrays(a);$("#dataUcapan").append(arrayToCongrats(t));findID(e.split("?")[1]),setTimeout(()=>{textareaHeight("#dataUcapan textarea")},500)}},error:function(){console.log("Maaf, silakan muat ulang halaman.")}}),congratsForm('[name="beriUcapan"]'),$('form[name="beriUcapan"]').each(function(){let a=document.forms.beriUcapan;a.querySelectorAll("input").forEach(a=>{a.addEventListener("keydown",a=>{(/[<>`@:#+]/g.test(a.key)||emoji().test(a.key))&&a.preventDefault()}),a.addEventListener("keyup",e=>{a.value=removeEmoji(a.value)})}),a.addEventListener("submit",e=>{e.preventDefault(),$('[name="beriUcapan"] .loading').removeClass("d-none"),fetch(urlUcapan,{method:"post",body:new FormData(a)}).then(a=>{$('[name="beriUcapan"] .loading').addClass("d-none"),$('[name="beriUcapan"]').addClass("d-none"),$("#success").removeClass("d-none"),setTimeout(()=>{},3e3)}).catch(a=>{$('[name="beriUcapan"] .loading').addClass("d-none"),$('[name="beriUcapan"] .status .alert-danger').removeClass("d-none"),setTimeout(()=>{$('[name="beriUcapan"] .status .alert-danger').addClass("d-none")},3e3)})})}),insertID("#beriUcapan-1","#beriUcapan-0"),themeSwitch("#beriUcapan-4","#form"),window.onbeforeunload=function(){$("body").remove(),$(window).scrollTop(0)},$(document).keydown(function(a){let e=a.target.tagName.toLowerCase();if("input"!=e&&"textarea"!=e&&(a.ctrlKey||a.metaKey)&&(65==a.keyCode||83==a.keyCode))return!1});