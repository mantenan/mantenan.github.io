/*
 * Maumantenan
 * https://maumantenan.com
 * Digital Wedding Invitation
 * Copyright (c) 2020-2022
 */
const shUrl=atob("aHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvMUhJVkpmMUdNOEJYUDFFM1E4c3l6emREZFB4RXl3OWtyWjlZb0djQjRvajAvZ3Zpei90cT90cXg9b3V0OmNzdiZzaGVldD0="),urlUcapan=atob("aHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J6QUp5emRuSXljVHBWNDczRV96cUk2R180ZUlYOTZTamU4eWxNcGdSX1lRY2o2LXBIX1dqTE1HQXlTNG9tSHRBTWIvZXhlYw==");function generateString(t){let e="";abc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",abcLength=abc.length;for(var a=0;a<t;a++)e+=abc.charAt(Math.floor(Math.random()*abcLength));return e}function emoji(){return/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g}function removeEmoji(t){return t.replace(emoji(),"")}function findID(t){document.querySelectorAll("[data-id]").forEach(e=>{t!==e.getAttribute("data-id")&&e.parentNode.removeChild(e)})}function arrayToCongrats(t){$(t).each(function(t,e){e[0];id=e[1],nama=e[2],judul=e[3],ucapan=e[4],tema=e[5],"Tema"!==tema&&$('<div data-id="'+id+'" data-theme="'+tema+'">\n\t\t\t\t\t<link rel="stylesheet" href="tema'+tema+'/main.css?v=2">\n\t\t\t\t\t<div class="container">\n\t\t\t\t\t\t<div class="obj-top">\n\t\t\t\t\t\t\t<img class="obj-1" src="tema'+tema+'/object-1.png">\n\t\t\t\t\t\t\t<img class="obj-2" src="tema'+tema+'/object-1.png">\n\t\t\t\t\t\t\t<img class="obj-3" src="tema'+tema+'/object-2.png">\n\t\t\t\t\t\t\t<img class="obj-4" src="tema'+tema+'/object-2.png">\n\t\t\t\t\t\t\t<img class="obj-5" src="tema'+tema+'/object-3.png">\n\t\t\t\t\t\t\t<img class="obj-6" src="tema'+tema+'/object-3.png">\n\t\t\t\t\t\t\t<img class="obj-7" src="tema'+tema+'/object-4.png">\n\t\t\t\t\t\t\t<img class="obj-8" src="tema'+tema+'/object-4.png">\n\t\t\t\t\t\t\t<img class="obj-9" src="tema'+tema+'/object-4.png">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="obj-mid">\n\t\t\t\t\t\t\t<div class="content p-3">\n\t\t\t\t\t\t\t\t<div class="title mb-4">'+judul+'</div>\n\t\t\t\t\t\t\t\t<textarea class="form-control border-0 bg-transparent" spellcheck="false" disabled>'+ucapan+'</textarea>\n\t\t\t\t\t\t\t\t<div class="author mt-4">~ '+nama+'</div>\n\t\t\t\t\t\t\t\t<a class="d-inline-block mt-5" href="/">\n\t\t\t\t\t\t\t\t\t<img class="brand" width="50" height="50" src="../assets/img/maumantenan-1.svg">\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="obj-btm">\n\t\t\t\t\t\t\t<img class="obj-1" src="tema'+tema+'/object-5.png">\n\t\t\t\t\t\t\t<img class="obj-2" src="tema'+tema+'/object-6.png">\n\t\t\t\t\t\t\t<img class="obj-3" src="tema'+tema+'/object-6.png">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>').prependTo("#dataUcapan")})}function textareaHeight(t){document.querySelectorAll(t).forEach(t=>{t.style.height="auto",t.style.height=t.scrollHeight+"px"})}function congratsForm(t){$(t+" #beriUcapan-3").on("input",function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"}),$(window).resize(()=>textareaHeight(t+" #beriUcapan-3"))}$("#beriUcapan-2").val("Selamat Hari Raya Idul Fitri 1443 H"),$("#beriUcapan-3").val("Minal Aidin Wal Faizin\nMohon maaf lahir dan batin\n🙏🏻"),$(window).resize(()=>textareaHeight("#dataUcapan textarea")),$.ajax({type:"GET",url:shUrl+"Ucapan",success:function(t){let e=window.location.href;if(e.indexOf("?")>-1){let a=$.csv.toArrays(t);$("#dataUcapan").append(arrayToCongrats(a)),findID(e.split("?")[1]),setTimeout(()=>{textareaHeight("#dataUcapan textarea")},500)}},error:function(){console.log("Maaf, silakan muat ulang halaman.")}}),congratsForm('[name="beriUcapan"]');const formUcapan=document.forms.beriUcapan;function insertID(t,e){$(t).on("keyup",function(){$(e).val(generateString(3)+btoa($(this).val()))})}function themeSwitch(t,e){$(t).on("change",function(){let t=$(this).val();$(e).attr("data-theme",t);let a=$(e).find("link").attr("href");split=a.split("/"),$(e).find("link").attr("href","tema"+t+"/"+split[1]),$(e).find("img").each(function(){let e=$(this).attr("src");split=e.split("/"),$(this).attr("src","tema"+t+"/"+split[1])}),1==t?($(e).find(".obj-btm").next().attr("style","z-index: 1;"),$(e).find("h2").removeAttr("style")):2==t&&($(e).find(".obj-btm").next().attr("style","position: absolute!important; top: 0; left: 0; right: 0;"),$(e).find("h2").attr("style","color: #553232!important; filter: drop-shadow(0 10px 13px rgb(255 255 255 / .5)) drop-shadow(0 5px 5px rgb(255 255 255 / .85));"))})}function copyToClipboard(){let t=$('<textarea class="position-fixed top left sr-only" id="copyToClipboard">');$("main").append(t),t.val(window.location.href+"?"+$("#beriUcapan-0").val()).select(),document.execCommand("copy"),t.remove(),$("#copied").fadeIn(),setTimeout(()=>{$("#copied").fadeOut()},5e3)}function shareToWA(){let t=window.location.href+"?"+$("#beriUcapan-0").val();wa="https://wa.me/?text="+t,window.open(wa,"_blank").focus()}function openLink(){let t=window.location.href+"?"+$("#beriUcapan-0").val();window.open(t,"_blank").focus()}formUcapan.querySelectorAll("input").forEach(t=>{t.addEventListener("keydown",t=>{(/[<>`@:#+]/g.test(t.key)||emoji().test(t.key))&&t.preventDefault()}),t.addEventListener("keyup",e=>{t.value=removeEmoji(t.value)})}),formUcapan.addEventListener("submit",t=>{t.preventDefault(),$('[name="beriUcapan"] .loading').removeClass("d-none"),fetch(urlUcapan,{method:"post",body:new FormData(formUcapan)}).then(t=>{$('[name="beriUcapan"] .loading').addClass("d-none"),$('[name="beriUcapan"]').addClass("d-none"),$("#success").removeClass("d-none"),setTimeout(()=>{},3e3)}).catch(t=>{$('[name="beriUcapan"] .loading').addClass("d-none"),$('[name="beriUcapan"] .status .alert-danger').removeClass("d-none"),setTimeout(()=>{$('[name="beriUcapan"] .status .alert-danger').addClass("d-none")},3e3)})}),insertID("#beriUcapan-1","#beriUcapan-0"),themeSwitch("#beriUcapan-4","#form"),window.onbeforeunload=function(){$("body").remove(),$(window).scrollTop(0)},$(document).keydown(function(t){let e=t.target.tagName.toLowerCase();if("input"!=e&&"textarea"!=e&&(t.ctrlKey||t.metaKey)&&(65==t.keyCode||83==t.keyCode))return!1});